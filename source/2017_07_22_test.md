Docker Learning
================

DATE: 2019-04-09

该文档涵盖了 Docker 的一些学习笔记.

阅读完该文档之后, 您将了解到:

* Docker 架构.
* Docker 使用
* Docker 的源码分析和架构思考.

--------------------------------------------------------------------------------

1 契机
------------------------------------------

最近开始重新学习spring，之前直接就是上手使用了，但是会用而不知其意，既然以后要将java作为技术语言，选择java开发这条路。

那么就应该一步一步，走的踏实。

同时也感谢过去的自己一直的努力，还有新东家的知遇之恩。

2 学习spring的计划安排
------------------------------------------

我将spring学习氛围三个阶段： 入门 、 进阶、 放弃

### 2.1 入门（做好磨磨唧唧、事无巨细的学习的准备吧）

自我剖析之后： 我最大的问题就是即使会用了，自己对spring还是没有一个清晰的认识，这很坑，不知道对其他人怎样，

我不行，没有全局把握我就感觉自己在原地踏步，所以成功的入门对我来说至关重要。

入门阶段，就是了解spring的概念，对一个小的spring项目，如何启动、调用、生命周期结束等有一个全面的认识。

并不需要知道具体某个注解，某个配置项的作用和实现原理，而是要了解一个简单的spring应用要想正常运行，

需要有哪些必不可缺的组成部分，各部分之间又是怎么联系起来，启动加载之后，各部分的执行顺序是什么，

最后程序关闭各部分又是如何响应的。

**总结下来就是：** 把握大的脉络架构，在整体上对spring应用先有一个认识。

主要任务点包括：

1. spring入门篇，先将spring的常用配置注解一个个了解清楚；
2. 一个简单的spring（boot）项目，了解一个完整项目的组成结构已经调用实现
3. 总结相关学习资源，在上述学习中总结后续要学习的内容，如tomcat、jetty、mybatis等

学习的重点：主要就是对自己之前一直不知道的问题进行求解

1. pom的各属性介绍以及POM加载依赖的过程
2. 各个常用注解的总结（用途和使用场景）


### 2.2 进阶

入门的目的是对spring的常用知识点和全局脉络有个清晰的认识，这块至关重要。

而进阶的目的则是为了实战，在具体项目中熟练使用spring、mybatis等框架

但是时间有限，估计只能做一个项目吧

主要的任务就是：

1. 做一个综合项目，包括spring、mybatis等多维的较复杂的项目练练手
2. 入门阶段对常用注解进行了分类总结，这次就需要分类了解实现原理，比如service、component等只需要了解其中一个就行

学习之后要求：

1. 可以自己构建一个复杂项目
2. 对spring、mybatis有个清晰的了解，从全局到细节

### 2.3 放弃

独孤求败最后无形化有形，当有了一个整体的认识之后，剩下的也只剩具体的学习了

可以在实践中学习，利用零散的时间学习

不过此时更应该追求综合能力了，都输guava一些大牛架构很好，此时就不光求精，还要求广了

一个菜鸟不太成熟的自我学习安排，重新上路

3 5G
----------------------------------------------

看看5G对java有啥子影响哈，别忘了。



可以看到当前的目录

```bash
docker volume ls

DRIVER              VOLUME NAME
local               4f80cc3ae270bf3c82abab71548bb1eaba8a0b2f7305e9ea862d5c96b1409009
local               5f1f3a638561b6ade35715fb320ce32dd96e86326cf85fd93e1b452350ccafb6
local               9d49d86bca227497d834a097dc08c972238ab4c8fc426f9889a03b500c3de470
local               33c3f1acba2d22e340f8bc24913a8a4501b689ee4f800f93d1d1e4e155356f1f
local               43b47ab7587f536bcc922eb5d8fa43d0075eb7d9e7e4648b395c89fd201f9d9c
local               5829ba6a91108cddaddd821e72edd7f9f0dc131ce25eafa9ddb72cf790a279af
local               6412489d1e1bff99a4b28f3c4fd6d7789724c5a0909a63ecc3d2fce51e9631f6
local               eefedf7a7e4aa781344c5dc40625fc813883a1ea73936461c54a1f0f39f4980c
local               f39f79523354563e72774100583c070a8077766b6ed4134995c7a468d77555a6
```

我们可以看到每一个 VOLUME 对应的本机的文件目录地址

```bash
docker volume inspect 4f80cc3ae270bf3c82abab71548bb1eaba8a0b2f7305e9ea862d5c96b1409009

[
    {
        "CreatedAt": "2019-05-12T08:16:36Z",
        "Driver": "local",
        "Labels": null,
        "Mountpoint": "/var/lib/docker/volumes/4f80cc3ae270bf3c82abab71548bb1eaba8a0b2f7305e9ea862d5c96b1409009/_data",
        "Name": "4f80cc3ae270bf3c82abab71548bb1eaba8a0b2f7305e9ea862d5c96b1409009",
        "Options": null,
        "Scope": "local"
    }
]
```

这里 `"Mountpoint": "/var/lib/docker/volumes/4f80cc3ae270bf3c82abab71548bb1eaba8a0b2f7305e9ea862d5c96b1409009/_data"` 为本机的目录

NOTE: 如果您用的是 MacOS, 上面的目录是无法打开的, 因为docker在mac中, 是通过 VM实现的. 需要先进入VM, 再进去上述的地址. 进入 VM 的方式跟您的 Mac 版本和 Docker 的版本相关. 我的方式为 `screen ~/Library/Containers/com.docker.docker/Data/vms/0/tty`, 参考 StackOverflow 的这篇文章 [Where is /var/lib/docker on Mac/OS X](https://stackoverflow.com/q/38532483)

容器编排,服务发现和集群
----------------------
### 容器编排 DockerCompose

### 服务发现 Consul

### 集群 Swarm
